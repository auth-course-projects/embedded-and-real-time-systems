<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/ico" href="favicon.ico"/>
    <title>Report | Project 2 - Final | HY3604</title>
    <!-- Bootstrap v3.7 -->
    <link rel="stylesheet" href="./vendor/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- Font-Awesome Font v4.7 -->
    <link rel="stylesheet" href="./vendor/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,700,700i&display=swap&subset=greek" rel="stylesheet">

    <style media="screen">
      body, .body, h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
        font-family: 'Roboto Mono', monospace;
      }
    </style>
  </head>
  <body>

    <div class="body">

      <nav class="navbar navbar-default navbar-fixed-bottom"
        style="background:#1c1f23;border:none;min-height:30px;box-shadow:inset 0px 4px 6px -4px rgba(0,0,0,0.75)">
        <div class="container" style="padding-top:5px;color:grey">
          &copy; Thanasis Charisoudis 2019
        </div>
      </nav>

      <div class="container">

        <h3>Project 2 (Final) Execution Report</h3>
        Course: Embedded Real Time Systems (HY3604)<br>
        Professor: prof. N. Pitsianis<br>
        Author: Thanasis Charisoudis (9026)<br>
        E.C.E. Aristotle University, Greece<br>

        <br>
        <hr>
        <br>

        <div class="panel panel-dark">
          <div class="panel-heading">
            <h3 class="panel-title">Timelines</h3>
          </div>
          <div class="panel-body">
            <p>For every session a JSON file is created containing interactivity logs as they occur in time.
              Each session's log file is then parsed and displayed as timeline, where vertical axis is the time and across
            that axis every event recorded is presented, as well as messages exchanged during that event.</p>
          </div>

          <table class="table">
            <thead>
              <tr>
                <th width="15%">&nbsp;</th>
                <th width="15%">Device</th>
                <th width="35%">Date</th>
                <th width="35%">Results</th>
              </tr>
            </thead>
            <tbody id="tbody1"></tbody>
          </table>

        </div>

        <div class="panel panel-dark" style="margin-top:2em">
          <div class="panel-heading">
            <h3 class="panel-title">Statistics</h3>
          </div>
          <div class="panel-body">
            <p>Some default panel content here. Nulla vitae elit libero, a pharetra augue. Aenean lacinia bibendum nulla sed consectetur. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
          </div>

          <table class="table">
            <thead>
              <tr>
                <th width="15%">&nbsp;</th>
                <th width="15%">Device</th>
                <th width="35%">Date</th>
                <th width="35%">Results</th>
              </tr>
            </thead>
            <tbody id="tbody2"></tbody>
          </table>

        </div>

        <br>
        <br>
        <br>
        <br>

      </div>
    </div>

    <script type="text/javascript">

      const tbody1Element = document.getElementById( 'tbody1' );
      const tbody2Element = document.getElementById( 'tbody2' );
      const maxNumberOfSessions = 100;
      const xhr = new XMLHttpRequest();

      let sessionIndex = 1;
      do {

        xhr.open( 'GET', `./Sessions/session${sessionIndex}.json`, false );
        xhr.send( null );

        // Check if session with $sessionIndex exists
        if ( xhr.status !== 200 ) {
          break;
        }

        // Get json data
        let session = JSON.parse( xhr.responseText );

        // Append element to table
        let tr1 = document.createElement( 'tr' );
        let tr2 = document.createElement( 'tr' );

        tr1.innerHTML = `
          <th>Session ${sessionIndex}</th>
          <td><i>${session.client_aem.padStart(4, '0')}</i></td>
          <td><i>${session.start}</i></td>
          <td><a href="./timeline/?session=${sessionIndex}">Timeline <i class="fa fa-chevron-right"></i></a></td>
        `;

        tr2.innerHTML = `
          <th>Session ${sessionIndex}</th>
          <td><i>${session.client_aem.padStart(4, '0')}</i></td>
          <td><i>${session.start}</i></td>
          <td><a href="./stats/?session=${sessionIndex}">Stats <i class="fa fa-chevron-right"></i></a></td>
        `;

        tbody1Element.appendChild( tr1 );
        tbody2Element.appendChild( tr2 );

      } while( ++sessionIndex < maxNumberOfSessions );

    </script>

  </body>
</html>
