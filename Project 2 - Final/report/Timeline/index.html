<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/ico" href="favicon.ico"/>
    <title>Select Session</title>
    <!-- Bootstrap v3.7 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css">
    <!-- Font-Awesome Font v4.7 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,400i,700,700i&display=swap&subset=greek" rel="stylesheet">

    <style media="screen">
      body, .body, h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
        font-family: 'Roboto Mono', monospace;
      }
    </style>
  </head>
  <body>

    <div class="body">
      <div class="container">

        <table class="table">
          <thead>
            <tr>
              <th width="20%">&nbsp;</th>
              <th width="40%">Date</th>
              <th width="40%">Timeline</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>

      </div>
    </div>

    <script type="text/javascript">

      const tbodyElement = document.getElementById( 'tbody' );
      const maxNumberOfSessions = 100;
      const xhr = new XMLHttpRequest();

      let sessionIndex = 1;
      do {

        xhr.open( 'GET', `./Sessions/session${sessionIndex}.json`, false );
        xhr.send( null );

        // Check if session with $sessionIndex exists
        if ( xhr.status !== 200 ) {
          break;
        }

        // Get json data
        let session = JSON.parse( xhr.responseText );

        // Append element to table
        let tr = document.createElement( 'tr' );
        tr.innerHTML = `
          <th>Session ${sessionIndex}</th>
          <td><i>${session.start}</i></td>
          <td><a href="session.html?session=${sessionIndex}">Link &nbsp;<i class="fa fa-chevron-right"></i></a></td>
        `;
        tbodyElement.appendChild( tr );

      } while( ++sessionIndex < maxNumberOfSessions );

    </script>

  </body>
</html>
